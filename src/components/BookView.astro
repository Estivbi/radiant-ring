---
import type { Book } from '../data/books';

interface Props {
  book: Book;
}

const { book } = Astro.props as Props;
---

<section class="p-8 max-w-4xl mx-auto pb-12">
  <!-- Breadcrumb: volver al inicio -->
  <nav class="text-sm mb-4">
    <a href="/" class="text-black font-semibold hover:underline">Inicio</a>
    <span class="mx-2 text-gray-500">/</span>
    <span class="text-gray-700">{book.title}</span>
  </nav>

  <div class="flex flex-col md:flex-row gap-8 md:items-center">
    <div class="w-full md:w-1/3 flex items-center justify-center">
      <img src={book.cover} alt={`Portada de ${book.title}`} class="w-full rounded shadow max-h-96 object-cover" />
    </div>
    <div class="w-full md:w-2/3 text-gray-900">
      <h1 class="text-3xl font-bold mb-4">{book.title}</h1>
      <div class="mb-4">
        <div class="max-h-[60vh] overflow-auto pr-2 text-justify whitespace-pre-line">
          {book.description}
        </div>
      </div>
  <p class="text-xl font-semibold mb-4">Precio: <span class="text-noir-yellow">{book.price.toFixed(2)}&euro;</span></p>

      <div class="mb-6">
        <h2 class="text-xl font-semibold mb-2">Opciones de compra y contacto</h2>
        <div class="flex flex-col sm:flex-row gap-3">
          {book.buyLink ? (
            <a href={book.buyLink} target="_blank" rel="noopener noreferrer" class="px-4 py-2 bg-noir-yellow text-gray-900 font-bold rounded">Comprar en Amazon</a>
          ) : null}
          <a href={`mailto:toyirock@gmail.com?subject=${encodeURIComponent(`Quiero comprar el libro ${book.title}`)}`} target="_blank" rel="noopener noreferrer" class="px-4 py-2 bg-gray-800 text-white rounded">Escribir a Custodio</a>
          <a href="https://instagram.com/custodio.perezperez" target="_blank" rel="noopener noreferrer" class="px-4 py-2 bg-pink-600 text-white rounded">Instagram</a>
        </div>
      </div>
    </div>
  </div>
</section>
